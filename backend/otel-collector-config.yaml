receivers:
  otlp:
    protocols:
      grpc:
      http:

processors:
  batch:
    timeout: 2s
    send_batch_size: 8192

exporters:
  prometheus:
    endpoint: "0.0.0.0:8889"
    namespace: todo
    const_labels:
      source: otelcol

  clickhouse:
    endpoint: "tcp://clickhouse:9000"   # <-- ?database=otel 제거
    database: "otel"                    # <-- 별도 키로 지정 (이 키는 허용됩니다)
    # 필요 시 인증
    # username: "default"
    # password: ""
    # (해당 버전에 따라 아래 키는 없을 수 있어 우선 생략)
    # logs_table_name: "otel_logs"
    # traces_table_name: "otel_traces"

service:
  pipelines:
    metrics:
      receivers: [otlp]
      processors: [batch]
      exporters: [prometheus]
    logs:
      receivers: [otlp]
      processors: [batch]
      exporters: [clickhouse]
    traces:
      receivers: [otlp]
      processors: [batch]
      exporters: [clickhouse]
